<!doctype html>
<html lang="ja">
    <head>
        <title>MMSF2 流星のロックマン2 チートコードジェネレーター</title>
        <meta name="author" content="SoloSx" />
        <link rel="stylesheet" type="text/css" href="CSS/body.css" />
    </head>

    <body>
        <h2>ブラザー設定</h2>
        <table border="1">
            <tr>
                <td>
                    <b>左上:</b><br />
                    ver:
                    <select class="ver-selection" id="top_left_ver"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 1枚目:
                    <select class="card-selection" id="top_left_fav_01"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 2枚目:
                    <select class="card-selection" id="top_left_fav_02"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 3枚目:
                    <select class="card-selection" id="top_left_fav_03"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 4枚目:
                    <select class="card-selection" id="top_left_fav_04"></select>
                    <!-- JavaScript array combo box--><br />
                </td>

                <td>
                    <b>右上:</b><br />
                    ver:
                    <select class="ver-selection" id="top_right_ver"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 1枚目:
                    <select class="card-selection" id="top_right_fav_01"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 2枚目:
                    <select class="card-selection" id="top_right_fav_02"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 3枚目:
                    <select class="card-selection" id="top_right_fav_03"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 4枚目:
                    <select class="card-selection" id="top_right_fav_04"></select>
                    <!-- JavaScript array combo box--><br />
                </td>
            </tr>

            <tr>
                <td>
                    <b>左中:</b><br />
                    ver:
                    <select class="ver-selection" id="mid_left_ver"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 1枚目:
                    <select class="card-selection" id="mid_left_fav_01"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 2枚目:
                    <select class="card-selection" id="mid_left_fav_02"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 3枚目:
                    <select class="card-selection" id="mid_left_fav_03"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 4枚目:
                    <select class="card-selection" id="mid_left_fav_04"></select>
                    <!-- JavaScript array combo box--><br />
                </td>
                <td>
                    <b>右中:</b><br />
                    ver:
                    <select class="ver-selection" id="mid_right_ver"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 1枚目:
                    <select class="card-selection" id="mid_right_fav_01"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 2枚目:
                    <select class="card-selection" id="mid_right_fav_02"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 3枚目:
                    <select class="card-selection" id="mid_right_fav_03"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 4枚目:
                    <select class="card-selection" id="mid_right_fav_04"></select>
                    <!-- JavaScript array combo box--><br />
                </td>
            </tr>

            <tr>
                <td>
                    <b>左下:</b><br />
                    ver:
                    <select class="ver-selection" id="btm_left_ver"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 1枚目:
                    <select class="card-selection" id="btm_left_fav_01"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 2枚目:
                    <select class="card-selection" id="btm_left_fav_02"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 3枚目:
                    <select class="card-selection" id="btm_left_fav_03"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 4枚目:
                    <select class="card-selection" id="btm_left_fav_04"></select>
                    <!-- JavaScript array combo box--><br />
                </td>
                <td>
                    <b>右下:</b><br />
                    ver:
                    <select class="ver-selection" id="btm_right_ver"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 1枚目:
                    <select class="card-selection" id="btm_right_fav_01"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 2枚目:
                    <select class="card-selection" id="btm_right_fav_02"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 3枚目:
                    <select class="card-selection" id="btm_right_fav_03"></select>
                    <!-- JavaScript array combo box--><br />
                    FAV 4枚目:
                    <select class="card-selection" id="btm_right_fav_04"></select>
                    <!-- JavaScript array combo box--><br />
                </td>
            </tr>
        </table>
        <script src="select_cards_jp.js"></script>
        <script src="select_ver_jp.js"></script>
        <button id="gen_val">コード出力</button>
        <button id="reset">リセット</button>
        <button id="copy_top_left">左上の設定をすべてにコピー</button><br />
        <textarea cols="30" rows="16" id="outputTextField"></textarea>

        <script>
            // All ver-selection and card-selection select elements
            var verSelects = document.querySelectorAll(".ver-selection");
            var cardSelects = document.querySelectorAll(".card-selection");

            // Output field and button
            var outputField = document.getElementById("outputTextField");
            var outputButton = document.getElementById("gen_val");

            // Objects to store selected keys
            var selectedVerKeys = {
                top_left_ver: "00000001",
                top_right_ver: "00000001",
                mid_left_ver: "00000001",
                mid_right_ver: "00000001",
                btm_left_ver: "00000001",
                btm_right_ver: "00000001",
            };

            var selectedCardKeys = {
                // top left
                top_left_fav_01: "0000",
                top_left_fav_02: "0000",
                top_left_fav_03: "0000",
                top_left_fav_04: "0000",

                // top right
                top_right_fav_01: "0000",
                top_right_fav_02: "0000",
                top_right_fav_03: "0000",
                top_right_fav_04: "0000",

                // mid left
                mid_left_fav_01: "0000",
                mid_left_fav_02: "0000",
                mid_left_fav_03: "0000",
                mid_left_fav_04: "0000",

                // mid right
                mid_right_fav_01: "0000",
                mid_right_fav_02: "0000",
                mid_right_fav_03: "0000",
                mid_right_fav_04: "0000",

                // btm left
                btm_left_fav_01: "0000",
                btm_left_fav_02: "0000",
                btm_left_fav_03: "0000",
                btm_left_fav_04: "0000",

                // btm right
                btm_right_fav_01: "0000",
                btm_right_fav_02: "0000",
                btm_right_fav_03: "0000",
                btm_right_fav_04: "0000",
            };

            // Add options and change event listeners to all ver-selection select elements
            for (var i = 0; i < verSelects.length; i++) {
                var select = verSelects[i];

                // Add options
                for (var key in ver_data) {
                    if (ver_data.hasOwnProperty(key)) {
                        var option = document.createElement("option");
                        option.value = key;
                        option.text = ver_data[key];
                        select.appendChild(option);
                    }
                }

                // Add a change event listener to the select element
                select.addEventListener("change", function (e) {
                    // Store the selected key
                    selectedVerKeys[e.target.id] = e.target.value;
                });
            }

            // Add options and change event listeners to all card-selection select elements
            for (var i = 0; i < cardSelects.length; i++) {
                var select = cardSelects[i];

                // Add options
                for (var key in card_data) {
                    // Assuming card_data is the data for the card selects
                    if (card_data.hasOwnProperty(key)) {
                        var option = document.createElement("option");
                        option.value = key;
                        option.text = card_data[key];
                        select.appendChild(option);
                    }
                }

                // Add a change event listener to the select element
                select.addEventListener("change", function (e) {
                    // Store the selected key
                    selectedCardKeys[e.target.id] = e.target.value;
                });
            }

            // Add a click event listener to the output button
            outputButton.addEventListener("click", function () {
                // Mapping for the selectedKeys to their corresponding strings
                var selectedVerKeyMap = {
                    top_left_ver: "1210ED84",
                    top_right_ver: "12110458",
                    mid_left_ver: "1210F520",
                    mid_right_ver: "12110BF4",
                    btm_left_ver: "1210FCBC",
                    btm_right_ver: "12111390",
                };

                // Mapping for the selectedKeys to their corresponding strings
                var selectedCardKeyMap = {
                    // top left
                    top_left_fav_01: "1210ED68",
                    top_left_fav_02: "1210ED6A",
                    top_left_fav_03: "1210ED6C",
                    top_left_fav_04: "1210ED6E",

                    // top right
                    top_right_fav_01: "1211043C",
                    top_right_fav_02: "1211043E",
                    top_right_fav_03: "12110440",
                    top_right_fav_04: "12110442",

                    // mid left
                    mid_left_fav_01: "1210F504",
                    mid_left_fav_02: "1210F506",
                    mid_left_fav_03: "1210F508",
                    mid_left_fav_04: "1210F50A",

                    // mid right
                    mid_right_fav_01: "12110BD8",
                    mid_right_fav_02: "12110BDA",
                    mid_right_fav_03: "12110BDC",
                    mid_right_fav_04: "12110BDE",

                    // btm left
                    btm_left_fav_01: "1210FCA0",
                    btm_left_fav_02: "1210FCA2",
                    btm_left_fav_03: "1210FCA4",
                    btm_left_fav_04: "1210FCA6",

                    // btm right
                    btm_right_fav_01: "12111374",
                    btm_right_fav_02: "12111376",
                    btm_right_fav_03: "12111378",
                    btm_right_fav_04: "1211137A",
                };

                // Array to store the output strings
                var outputStrings = [];

                // Create the output strings
                for (var key in selectedVerKeys) {
                    if (selectedVerKeys.hasOwnProperty(key)) {
                        outputStrings.push(selectedVerKeyMap[key] + " " + selectedVerKeys[key]);
                    }
                }

                for (var key in selectedCardKeys) {
                    if (selectedCardKeys.hasOwnProperty(key)) {
                        outputStrings.push(selectedCardKeyMap[key] + " " + "0000" + selectedCardKeys[key]);
                    }
                }

                // Update the value of the text field with the output strings
                outputField.value = outputStrings.join("\n");
            });

            // Add an event listener to the reset button
            document.getElementById("reset").addEventListener("click", function () {
                // Clear all selects
                for (var i = 0; i < verSelects.length; i++) {
                    verSelects[i].selectedIndex = 0;
                }
                for (var i = 0; i < cardSelects.length; i++) {
                    cardSelects[i].selectedIndex = 0;
                }

                // Clear the selected keys
                for (var key in selectedVerKeys) {
                    if (selectedVerKeys.hasOwnProperty(key)) {
                        selectedVerKeys[key] = "00000001";
                    }
                }
                for (var key in selectedCardKeys) {
                    if (selectedCardKeys.hasOwnProperty(key)) {
                        selectedCardKeys[key] = "0000";
                    }
                }

                // Clear the output field
                outputField.value = "";
            });

            // Add an event listener to the copy top left button
            document.getElementById("copy_top_left").addEventListener("click", function () {
                // Get the top left ver value
                var topLeftVer = selectedVerKeys["top_left_ver"];

                // Get the top left FAV values
                var topLeftFav01 = selectedCardKeys["top_left_fav_01"];
                var topLeftFav02 = selectedCardKeys["top_left_fav_02"];
                var topLeftFav03 = selectedCardKeys["top_left_fav_03"];
                var topLeftFav04 = selectedCardKeys["top_left_fav_04"];

                // Copy ver value to all other positions
                selectedVerKeys["top_right_ver"] = topLeftVer;
                selectedVerKeys["mid_left_ver"] = topLeftVer;
                selectedVerKeys["mid_right_ver"] = topLeftVer;
                selectedVerKeys["btm_left_ver"] = topLeftVer;
                selectedVerKeys["btm_right_ver"] = topLeftVer;

                // Copy FAV values to all other positions
                // Top right
                selectedCardKeys["top_right_fav_01"] = topLeftFav01;
                selectedCardKeys["top_right_fav_02"] = topLeftFav02;
                selectedCardKeys["top_right_fav_03"] = topLeftFav03;
                selectedCardKeys["top_right_fav_04"] = topLeftFav04;

                // Mid left
                selectedCardKeys["mid_left_fav_01"] = topLeftFav01;
                selectedCardKeys["mid_left_fav_02"] = topLeftFav02;
                selectedCardKeys["mid_left_fav_03"] = topLeftFav03;
                selectedCardKeys["mid_left_fav_04"] = topLeftFav04;

                // Mid right
                selectedCardKeys["mid_right_fav_01"] = topLeftFav01;
                selectedCardKeys["mid_right_fav_02"] = topLeftFav02;
                selectedCardKeys["mid_right_fav_03"] = topLeftFav03;
                selectedCardKeys["mid_right_fav_04"] = topLeftFav04;

                // Bottom left
                selectedCardKeys["btm_left_fav_01"] = topLeftFav01;
                selectedCardKeys["btm_left_fav_02"] = topLeftFav02;
                selectedCardKeys["btm_left_fav_03"] = topLeftFav03;
                selectedCardKeys["btm_left_fav_04"] = topLeftFav04;

                // Bottom right
                selectedCardKeys["btm_right_fav_01"] = topLeftFav01;
                selectedCardKeys["btm_right_fav_02"] = topLeftFav02;
                selectedCardKeys["btm_right_fav_03"] = topLeftFav03;
                selectedCardKeys["btm_right_fav_04"] = topLeftFav04;

                // Update the select elements to reflect the new values
                // Ver selects
                for (var i = 0; i < verSelects.length; i++) {
                    var select = verSelects[i];
                    var id = select.id;
                    if (id !== "top_left_ver") {
                        // Find the option with the value matching topLeftVer
                        for (var j = 0; j < select.options.length; j++) {
                            if (select.options[j].value === topLeftVer) {
                                select.selectedIndex = j;
                                break;
                            }
                        }
                    }
                }

                // Card selects
                for (var i = 0; i < cardSelects.length; i++) {
                    var select = cardSelects[i];
                    var id = select.id;
                    if (!id.startsWith("top_left_")) {
                        // Extract the position (top_right, mid_left, etc.) and the fav number (fav_01, fav_02, etc.)
                        var parts = id.split("_");
                        var position = parts[0] + "_" + parts[1]; // e.g., "top_right", "mid_left"
                        var favNumber = parts[2] + "_" + parts[3]; // e.g., "fav_01", "fav_02"
                       
                        // Get the corresponding top left value
                        var topLeftId = "top_left_" + favNumber;
                        var topLeftValue = selectedCardKeys[topLeftId];

                        // Find the option with the value matching the top left value
                        for (var j = 0; j < select.options.length; j++) {
                            if (select.options[j].value === topLeftValue) {
                                select.selectedIndex = j;
                                break;
                            }
                        }
                    }
                }
            });
        </script>
    </body>
</html>
